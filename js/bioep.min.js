window.bioEp=function(e,t){"use strict";var o=function(){var t=this;t.bgEl={},t.popupEl={},t.popupElContainer={},t.closeBtnEl={},t.shown=!1,t.overflowDefault="visible",t.transformDefault="",t.uid="",t.width=400,t.height=220,t.html="",t.css="",t.fonts=[],t.delay=5,t.showOnDelay=!1,t.cookieExp=0,t.showOncePerSession=!1,t.onPopup=null,t.cookieManager={create:function(e,t,o,n){var i="";if(n)i="; expires=0";else if(o){var d=new Date;d.setTime(d.getTime()+24*o*60*60*1e3),i="; expires="+d.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},get:function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},erase:function(e){this.create(e,"",-1)}},t.checkCookie=function(){return t.cookieExp<=0?!(!t.showOncePerSession||"true"!=t.cookieManager.get("bioep_shown_session_"+t.uid))||(t.cookieManager.erase("bioep_shown_"+t.uid),!1):"true"==t.cookieManager.get("bioep_shown_"+t.uid)},t.addCSS=function(){for(var e=0;e<t.fonts.length;e++){var o=document.createElement("link");o.href=t.fonts[e],o.type="text/css",o.rel="stylesheet",document.head.appendChild(o)}var n=document.createTextNode("#bio_ep_bg {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; opacity: 0.3; z-index: 10001;}#bio_ep {display: none; position: fixed; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); -webkit-transform: translateX(-50%) translateY(-50%); -ms-transform: translateX(-50%) translateY(-50%); background-color: #fff; box-shadow: 0px 1px 4px 0 rgba(0,0,0,0.5); z-index: 10002;}#bio_ep_close {position: absolute; right: -10px; top: 0; margin: -8px 0 0 -12px; width: 20px; height: 20px; color: #fff; font-size: 12px; font-weight: bold; text-align: center; border-radius: 50%; background-color: #5c5c5c; cursor: pointer;}"+t.css),i=document.createElement("style");i.type="text/css",i.appendChild(n),document.head.insertBefore(i,document.getElementsByTagName("style")[0])},t.addPopup=function(){t.bgEl=document.getElementById("bio_ep_bg"),t.popupEl=document.getElementById("bio_ep"),t.closeBtnEl=document.getElementById("bio_ep_close"),t.bgEl||(t.addCSS(),t.bgEl=document.createElement("div"),t.bgEl.id="bio_ep_bg",document.body.appendChild(t.bgEl)),t.popupEl?t.popupElContainer=t.popupEl.childNodes[1]:(t.popupEl=document.createElement("div"),t.popupEl.id="bio_ep",t.popupEl.style.display="none",t.closeBtnEl=document.createElement("div"),t.closeBtnEl.id="bio_ep_close",t.closeBtnEl.appendChild(document.createTextNode("X")),t.popupElContainer=document.createElement("div"),t.popupEl.appendChild(t.closeBtnEl),t.popupEl.appendChild(t.popupElContainer),document.body.appendChild(t.popupEl))},t.showPopup=function(){t.shown||t.loadContent(t.html,function(e){t.popupEl.style.transform="",t.popupElContainer.innerHTML=e,t.bgEl.style.display="block",t.popupEl.style.display="block",t.scalePopup(),t.overflowDefault=document.body.style.overflow,document.body.style.overflow="hidden",t.shown=!0,""!=t.uid&&(t.cookieManager.create("bioep_shown_session_"+t.uid,"true",0,!0),t.cookieManager.create("bioep_shown_"+t.uid,"true",t.cookieExp,!1)),"function"==typeof t.onPopup&&t.onPopup()})},t.hidePopup=function(){t.bgEl.style.display="none",t.popupEl.style.display="none",document.body.style.overflow=t.overflowDefault},t.scalePopup=function(){var o={width:40,height:40},n={width:t.popupEl.offsetWidth,height:t.popupEl.offsetHeight},i={width:e.innerWidth,height:e.innerHeight},d={width:0,height:0},p=n.width/n.height;n.width>i.width-o.width&&(d.width=i.width-o.width,d.height=d.width/p,d.height>i.height-o.height&&(d.height=i.height-o.height,d.width=d.height*p)),0===d.height&&n.height>i.height-o.height&&(d.height=i.height-o.height,d.width=d.height*p);var l=d.width/n.width;(l<=0||l>1)&&(l=1),""===t.transformDefault&&(t.transformDefault=e.getComputedStyle(t.popupEl,null).getPropertyValue("transform")),t.popupEl.style.transform=t.transformDefault+" scale("+l+")"},t.addEvent=function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},t.loadEvents=function(){t.addEvent(document,"mouseout",function(o){if(o=o?o:e.event,"input"!=o.target.tagName.toLowerCase()){var n=Math.max(document.documentElement.clientWidth,e.innerWidth||0);if(!(o.clientX>=n-50||o.clientY>=50)){var i=o.relatedTarget||o.toElement;i||t.showPopup()}}}),t.addEvent(t.closeBtnEl,"click",function(){t.hidePopup()}),t.addEvent(e,"resize",function(){t.scalePopup()})},t.setOptions=function(e){t.width="undefined"==typeof e.width?t.width:e.width,t.height="undefined"==typeof e.height?t.height:e.height,t.html="undefined"==typeof e.html?t.html:e.html,t.css="undefined"==typeof e.css?t.css:e.css,t.fonts="undefined"==typeof e.fonts?t.fonts:e.fonts,t.delay="undefined"==typeof e.delay?t.delay:e.delay,t.showOnDelay="undefined"==typeof e.showOnDelay?t.showOnDelay:e.showOnDelay,t.cookieExp="undefined"==typeof e.cookieExp?t.cookieExp:e.cookieExp,t.showOncePerSession="undefined"==typeof e.showOncePerSession?t.showOncePerSession:e.showOncePerSession,t.onPopup="undefined"==typeof e.onPopup?t.onPopup:e.onPopup,t.uid="undefined"==typeof e.uid?t.uid:e.uid},t.domReady=function(e){"interactive"===document.readyState||"complete"===document.readyState?e():t.addEvent(document,"DOMContentLoaded",e)},t.loadContent=function(e,t){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status?t&&"function"==typeof t&&t(o.responseText):console.log("Request failed.  Returned status of "+o.status)},o.send()},t.init=function(e){"undefined"!=typeof e&&t.setOptions(e),t.domReady(function(){t.checkCookie()||(t.addPopup(),setTimeout(function(){t.loadEvents(),t.showOnDelay&&t.showPopup()},1e3*t.delay))})}},n=function(e){var t=new o;return t.init(e),t};return{init:n}}(window);